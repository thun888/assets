!function(t){"use strict";function n(){}function e(t){return t()}function i(){return Object.create(null)}function o(t){t.forEach(e)}function r(t){return"function"==typeof t}function s(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function c(t,n){t.appendChild(n)}function a(t,n,e){t.insertBefore(n,e||null)}function l(t){t.parentNode.removeChild(t)}function u(t){return document.createElement(t)}function d(t){return document.createTextNode(t)}function f(){return d(" ")}function p(t,n,e,i){return t.addEventListener(n,e,i),()=>t.removeEventListener(n,e,i)}function m(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function g(t,n){t.value=null==n?"":n}let h;function $(t){h=t}function y(){if(!h)throw new Error("Function called outside component initialization");return h}function v(){const t=y();return(n,e)=>{const i=t.$$.callbacks[n];if(i){const o=function(t,n){const e=document.createEvent("CustomEvent");return e.initCustomEvent(t,!1,!1,n),e}(n,e);i.slice().forEach(n=>{n.call(t,o)})}}}const b=[],w=[],x=[],k=[],_=Promise.resolve();let L=!1;function E(t){x.push(t)}let T=!1;const M=new Set;function C(){if(!T){T=!0;do{for(let t=0;t<b.length;t+=1){const n=b[t];$(n),D(n.$$)}for(b.length=0;w.length;)w.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];M.has(n)||(M.add(n),n())}x.length=0}while(b.length);for(;k.length;)k.pop()();L=!1,T=!1,M.clear()}}function D(t){if(null!==t.fragment){t.update(),o(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(E)}}const S=new Set;function A(t,n){t&&t.i&&(S.delete(t),t.i(n))}function N(t,n,e,i){if(t&&t.o){if(S.has(t))return;S.add(t),undefined.c.push(()=>{S.delete(t),i&&(e&&t.d(1),i())}),t.o(n)}}function H(t,n){t.d(1),n.delete(t.key)}function j(t){t&&t.c()}function O(t,n,i){const{fragment:s,on_mount:c,on_destroy:a,after_update:l}=t.$$;s&&s.m(n,i),E(()=>{const n=c.map(e).filter(r);a?a.push(...n):o(n),t.$$.on_mount=[]}),l.forEach(E)}function q(t,n){const e=t.$$;null!==e.fragment&&(o(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function R(t,n){-1===t.$$.dirty[0]&&(b.push(t),L||(L=!0,_.then(C)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function U(t,e,r,s,c,a,u=[-1]){const d=h;$(t);const f=e.props||{},p=t.$$={fragment:null,ctx:null,props:a,update:n,not_equal:c,bound:i(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(d?d.$$.context:[]),callbacks:i(),dirty:u,skip_bound:!1};let m=!1;if(p.ctx=r?r(t,f,(n,e,...i)=>{const o=i.length?i[0]:e;return p.ctx&&c(p.ctx[n],p.ctx[n]=o)&&(!p.skip_bound&&p.bound[n]&&p.bound[n](o),m&&R(t,n)),e}):[],p.update(),m=!0,o(p.before_update),p.fragment=!!s&&s(p.ctx),e.target){if(e.hydrate){const t=function(t){return Array.from(t.childNodes)}(e.target);p.fragment&&p.fragment.l(t),t.forEach(l)}else p.fragment&&p.fragment.c();e.intro&&A(t.$$.fragment),O(t,e.target,e.anchor),C()}$(d)}class z{$destroy(){q(this,1),this.$destroy=n}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(t){var n;this.$$set&&(n=t,0!==Object.keys(n).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}let B=(t=21)=>{let n="",e=crypto.getRandomValues(new Uint8Array(t));for(;t--;){let i=63&e[t];n+=i<36?i.toString(36):i<62?(i-26).toString(36).toUpperCase():i<63?"_":"-"}return n};function F(t,n,e){const i=t.slice();return i[11]=n[e],i[12]=n,i[13]=e,i}function P(t){let n;return{c(){n=u("span"),n.textContent="●",m(n,"class","ml-1")},m(t,e){a(t,n,e)},d(t){t&&l(n)}}}function V(t){let n,e=[],i=new Map,o=t[0];const r=t=>t[11].id;for(let n=0;n<o.length;n+=1){let s=F(t,o,n),c=r(s);i.set(c,e[n]=J(c,s))}let s=null;return o.length||(s=I()),{c(){for(let t=0;t<e.length;t+=1)e[t].c();n=d(""),s&&s.c()},m(t,i){for(let n=0;n<e.length;n+=1)e[n].m(t,i);a(t,n,i),s&&s.m(t,i)},p(t,o){if(33&o){const c=t[0];e=function(t,n,e,i,o,r,s,c,a,l,u,d){let f=t.length,p=r.length,m=f;const g={};for(;m--;)g[t[m].key]=m;const h=[],$=new Map,y=new Map;for(m=p;m--;){const t=d(o,r,m),c=e(t);let a=s.get(c);a?i&&a.p(t,n):(a=l(c,t),a.c()),$.set(c,h[m]=a),c in g&&y.set(c,Math.abs(m-g[c]))}const v=new Set,b=new Set;function w(t){A(t,1),t.m(c,u),s.set(t.key,t),u=t.first,p--}for(;f&&p;){const n=h[p-1],e=t[f-1],i=n.key,o=e.key;n===e?(u=n.first,f--,p--):$.has(o)?!s.has(i)||v.has(i)?w(n):b.has(o)?f--:y.get(i)>y.get(o)?(b.add(i),w(n)):(v.add(o),f--):(a(e,s),f--)}for(;f--;){const n=t[f];$.has(n.key)||a(n,s)}for(;p;)w(h[p-1]);return h}(e,o,r,1,t,c,i,n.parentNode,H,J,n,F),!c.length&&s?s.p(t,o):c.length?s&&(s.d(1),s=null):(s=I(),s.c(),s.m(n.parentNode,n))}},d(t){for(let n=0;n<e.length;n+=1)e[n].d(t);t&&l(n),s&&s.d(t)}}}function G(t){let e;return{c(){e=u("div"),e.innerHTML='<i class="fas fa-sync fa-spin"></i>',m(e,"class","text-center")},m(t,n){a(t,e,n)},p:n,d(t){t&&l(e)}}}function I(e){let i,o,r;return{c(){i=u("div"),o=u("p"),o.textContent=""+t.t("general.noResult"),r=f(),m(i,"class","text-center")},m(t,n){a(t,i,n),c(i,o),c(i,r)},p:n,d(t){t&&l(i)}}}function J(t,n){let e,i,r,s,d,h,$,y,v,b;function w(){n[6].call(s,n[12],n[13])}function x(...t){return n[8](n[11],...t)}return{key:t,first:null,c(){e=u("div"),i=u("div"),i.innerHTML='<span class="input-group-text">@</span>',r=f(),s=u("input"),d=f(),h=u("div"),$=u("button"),$.innerHTML='<i class="fas fa-trash"></i>',y=f(),m(i,"class","input-group-prepend"),m(s,"type","text"),m(s,"class","form-control"),m($,"class","btn btn-secondary"),m(h,"class","input-group-append"),m(e,"class","input-group mb-3"),this.first=e},m(t,o){a(t,e,o),c(e,i),c(e,r),c(e,s),g(s,n[11].value),c(e,d),c(e,h),c(h,$),c(e,y),v||(b=[p(s,"input",w),p(s,"input",n[7]),p($,"click",x)],v=!0)},p(t,e){n=t,1&e&&s.value!==n[11].value&&g(s,n[11].value)},d(t){t&&l(e),v=!1,o(b)}}}function K(e){let i,r,s,g,h,$,y,v,b,w,x,k,_,L,E,T,M=e[3]&&P();function C(t,n){return t[4]?G:V}let D=C(e),S=D(e);return{c(){i=u("div"),r=u("div"),s=u("h3"),g=d(e[1]),h=f(),M&&M.c(),$=f(),y=u("div"),S.c(),v=f(),b=u("button"),b.innerHTML='<i class="fas fa-plus"></i>',w=f(),x=u("div"),k=u("div"),_=u("button"),_.textContent=""+t.t("general.submit"),m(s,"class","card-title"),m(r,"class","card-header"),m(b,"class","btn btn-primary mt-3"),m(y,"class","card-body"),m(_,"class","btn btn-primary"),m(k,"class","float-right"),m(x,"class","card-footer"),m(i,"class",L="card card-"+e[2])},m(t,n){a(t,i,n),c(i,r),c(r,s),c(s,g),c(s,h),M&&M.m(s,null),c(i,$),c(i,y),S.m(y,null),c(y,v),c(y,b),c(i,w),c(i,x),c(x,k),c(k,_),E||(T=[p(b,"click",e[9]),p(_,"click",e[10])],E=!0)},p(t,[n]){2&n&&function(t,n){n=""+n,t.wholeText!==n&&(t.data=n)}(g,t[1]),t[3]?M||(M=P(),M.c(),M.m(s,null)):M&&(M.d(1),M=null),D===(D=C(t))&&S?S.p(t,n):(S.d(1),S=D(t),S&&(S.c(),S.m(y,v))),4&n&&L!==(L="card card-"+t[2])&&m(i,"class",L)},i:n,o:n,d(t){t&&l(i),M&&M.d(),S.d(),E=!1,o(T)}}}function Q(t,n,e){const i=v();let{title:o=""}=n,{cardType:r=""}=n,{isDirty:s}=n,{isLoading:c}=n,{list:a=[]}=n;return t.$$set=t=>{"title"in t&&e(1,o=t.title),"cardType"in t&&e(2,r=t.cardType),"isDirty"in t&&e(3,s=t.isDirty),"isLoading"in t&&e(4,c=t.isLoading),"list"in t&&e(0,a=t.list)},[a,o,r,s,c,i,function(t,n){t[n].value=this.value,e(0,a)},()=>i("edit"),t=>i("remove",t.id),()=>i("add"),()=>i("save")]}class W extends z{constructor(t){super(),U(this,t,Q,K,s,{title:1,cardType:2,isDirty:3,isLoading:4,list:0})}}function X(n){let e,i,o,r,s,d,p;return o=new W({props:{list:n[1],title:t.t("restricted-email-domains.allow.title"),cardType:"success",isDirty:n[2],isLoading:n[0]}}),o.$on("edit",n[11]),o.$on("add",n[5]),o.$on("remove",n[12]),o.$on("save",n[7]),d=new W({props:{list:n[3],title:t.t("restricted-email-domains.deny.title"),cardType:"danger",isDirty:n[4],isLoading:n[0]}}),d.$on("edit",n[13]),d.$on("add",n[8]),d.$on("remove",n[14]),d.$on("save",n[10]),{c(){e=u("div"),i=u("div"),j(o.$$.fragment),r=f(),s=u("div"),j(d.$$.fragment),m(i,"class","col-lg-6"),m(s,"class","col-lg-6"),m(e,"class","row")},m(t,n){a(t,e,n),c(e,i),O(o,i,null),c(e,r),c(e,s),O(d,s,null),p=!0},p(t,[n]){const e={};2&n&&(e.list=t[1]),4&n&&(e.isDirty=t[2]),1&n&&(e.isLoading=t[0]),o.$set(e);const i={};8&n&&(i.list=t[3]),16&n&&(i.isDirty=t[4]),1&n&&(i.isLoading=t[0]),d.$set(i)},i(t){p||(A(o.$$.fragment,t),A(d.$$.fragment,t),p=!0)},o(t){N(o.$$.fragment,t),N(d.$$.fragment,t),p=!1},d(t){t&&l(e),q(o),q(d)}}}function Y(n,e,i){let o=!0,r=[],s=!1,c=[],a=!1;var l;function u(t){i(2,s=!0),i(1,r=r.filter(n=>n.id!==t))}function d(t){i(4,a=!0),i(3,c=c.filter(n=>n.id!==t))}l=async()=>{const{allow:n,deny:e}=await t.fetch.get("/admin/restricted-email-domains");i(1,r=n.map(t=>({id:B(),value:t}))),i(3,c=e.map(t=>({id:B(),value:t}))),i(0,o=!1)},y().$$.on_mount.push(l);return[o,r,s,c,a,function(){i(2,s=!0);const t={id:B(),value:""};i(1,r=[...r,t])},u,async function(){""===await t.fetch.put("/admin/restricted-email-domains/allow",r.map(t=>t.value))&&(t.notify.toast.success(t.t("restricted-email-domains.ok")),i(2,s=!1))},function(){i(4,a=!0);const t={id:B(),value:""};i(3,c=[...c,t])},d,async function(){""===await t.fetch.put("/admin/restricted-email-domains/deny",c.map(t=>t.value))&&(t.notify.toast.success(t.t("restricted-email-domains.ok")),i(4,a=!1))},()=>i(2,s=!0),t=>u(t.detail),()=>i(4,a=!0),t=>d(t.detail)]}class Z extends z{constructor(t){super(),U(this,t,Y,X,s,{})}}const tt=document.querySelector("#config");tt&&new Z({target:tt})}(blessing);
