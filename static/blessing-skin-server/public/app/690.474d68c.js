"use strict";(self.webpackChunkblessing_skin_server=self.webpackChunkblessing_skin_server||[]).push([[690],{7229:function(e,s,i){i.r(s),i.d(s,{default:function(){return S}});var a=i(5893),d=i(7294),n=i(1570),t=i(57),r=i(9972),c=i(88),l=i(6703),o=i(2065),v=i(8848),j=i(9147),m=i(7894),h=i(786),x=i(550);const g=h.Z.div`
  width: 48%;
  margin: 7px;

  ${x.Qj(x.Uo.lg)} {
    width: 98%;
  }
`;var p=i(6010),b=e=>{const{player:s}=e,i=document.body.classList.contains("dark-mode"),d=`${blessing.base_url}/avatar/player/${s.name}`,n=`${d}?png`;return(0,a.jsxs)(g,Object.assign({className:(0,p.Z)("info-box",{"bg-gray-dark":i})},{children:[(0,a.jsx)("div",Object.assign({className:"info-box-icon"},{children:(0,a.jsxs)("picture",{children:[(0,a.jsx)("source",{srcSet:d,type:"image/webp"},void 0),(0,a.jsx)("img",{className:"bs-avatar",src:n},void 0)]},void 0)}),void 0),(0,a.jsxs)("div",Object.assign({className:"info-box-content"},{children:[(0,a.jsxs)("div",Object.assign({className:"row"},{children:[(0,a.jsx)("div",Object.assign({className:"col-10"},{children:(0,a.jsx)("b",{children:s.name},void 0)}),void 0),(0,a.jsx)("div",Object.assign({className:"col-2"},{children:(0,a.jsxs)("div",Object.assign({className:"float-right dropdown"},{children:[(0,a.jsx)("a",Object.assign({className:"text-gray",href:"#","data-toggle":"dropdown","aria-expanded":"false"},{children:(0,a.jsx)("i",{className:"fas fa-cog"},void 0)}),void 0),(0,a.jsxs)("div",Object.assign({className:"dropdown-menu dropdown-menu-right"},{children:[(0,a.jsxs)("a",Object.assign({href:"#",className:"dropdown-item",onClick:()=>{const e=`${blessing.base_url}/preview/${s.tid_skin}`,i=`${e}?png`,d=`${blessing.base_url}/preview/${s.tid_cape}`,n=`${d}?png`;(0,o.K)({mode:"alert",title:(0,c.t)("general.player.previews"),children:(0,a.jsxs)("div",Object.assign({className:"row"},{children:[(0,a.jsx)("div",Object.assign({className:"col-6 d-flex justify-content-center"},{children:s.tid_skin>0&&(0,a.jsx)("a",Object.assign({href:`${blessing.base_url}/skinlib/show/${s.tid_skin}`,target:"_blank"},{children:(0,a.jsxs)("picture",{children:[(0,a.jsx)("source",{srcSet:e,type:"image/webp"},void 0),(0,a.jsx)("img",{src:i,alt:`${s.name} - ${(0,c.t)("general.skin")}`,width:"128"},void 0)]},void 0)}),void 0)}),void 0),(0,a.jsx)("div",Object.assign({className:"col-6 d-flex justify-content-center"},{children:s.tid_cape>0&&(0,a.jsx)("a",Object.assign({href:`${blessing.base_url}/skinlib/show/${s.tid_cape}`,target:"_blank"},{children:(0,a.jsxs)("picture",{children:[(0,a.jsx)("source",{srcSet:d,type:"image/webp"},void 0),(0,a.jsx)("img",{src:n,alt:`${s.name} - ${(0,c.t)("general.cape")}`,width:"128"},void 0)]},void 0)}),void 0)}),void 0)]}),void 0)})}},{children:[(0,a.jsx)("i",{className:"fas fa-eye mr-2"},void 0),(0,c.t)("general.player.previews")]}),void 0),(0,a.jsx)("div",{className:"dropdown-divider"},void 0),(0,a.jsxs)("a",Object.assign({href:"#",className:"dropdown-item",onClick:e.onUpdateName},{children:[(0,a.jsx)("i",{className:"fas fa-signature mr-2"},void 0),(0,c.t)("admin.changePlayerName")]}),void 0),(0,a.jsxs)("a",Object.assign({href:"#",className:"dropdown-item",onClick:e.onUpdateOwner},{children:[(0,a.jsx)("i",{className:"fas fa-user-edit mr-2"},void 0),(0,c.t)("admin.changeOwner")]}),void 0),(0,a.jsxs)("a",Object.assign({href:"#",className:"dropdown-item",onClick:e.onUpdateTexture},{children:[(0,a.jsx)("i",{className:"fas fa-tshirt mr-2"},void 0),(0,c.t)("admin.changeTexture")]}),void 0),(0,a.jsx)("div",{className:"dropdown-divider"},void 0),(0,a.jsxs)("a",Object.assign({href:"#",className:"dropdown-item dropdown-item-danger",onClick:e.onDelete},{children:[(0,a.jsx)("i",{className:"fas fa-trash mr-2"},void 0),(0,c.t)("admin.deletePlayer")]}),void 0)]}),void 0)]}),void 0)}),void 0)]}),void 0),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("span",Object.assign({className:"mr-2"},{children:["PID: ",s.pid]}),void 0),(0,a.jsxs)("span",{children:[(0,c.t)("general.player.owner"),": ",s.uid]},void 0)]},void 0),(0,a.jsx)("div",{children:(0,a.jsxs)("small",Object.assign({className:"text-gray"},{children:[`${(0,c.t)("general.player.last-modified")}: `,s.last_modified]}),void 0)},void 0)]},void 0)]}),void 0)]}),void 0)},u=i(1655);const N=document.body.classList.contains("dark-mode"),f=(0,h.Z)(u.ZP)`
  width: ${e=>e.width};
`;var y=()=>(0,a.jsxs)(g,Object.assign({className:(0,p.Z)("info-box",{"bg-gray-dark":N})},{children:[(0,a.jsx)("div",Object.assign({className:"info-box-icon"},{children:(0,a.jsx)(u.ZP,{circle:!0,height:50,width:50},void 0)}),void 0),(0,a.jsxs)("div",Object.assign({className:"info-box-content"},{children:[(0,a.jsxs)("div",Object.assign({className:"row"},{children:[(0,a.jsx)("div",Object.assign({className:"col-10"},{children:(0,a.jsx)(f,{width:"120px"},void 0)}),void 0),(0,a.jsx)("div",{className:"col-2"},void 0)]}),void 0),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{children:(0,a.jsx)(f,{width:"150px"},void 0)},void 0),(0,a.jsx)("div",{children:(0,a.jsx)(f,{width:"180px"},void 0)},void 0)]},void 0)]}),void 0)]}),void 0),w=i(3291),O=e=>{const{player:s}=e;return(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{children:s.pid},void 0),(0,a.jsxs)("td",{children:[s.name,(0,a.jsx)("span",Object.assign({className:"ml-1"},{children:(0,a.jsx)(w.Z,{title:(0,c.t)("admin.changePlayerName"),onClick:e.onUpdateName},void 0)}),void 0)]},void 0),(0,a.jsxs)("td",{children:[s.uid,(0,a.jsx)("span",Object.assign({className:"ml-1"},{children:(0,a.jsx)(w.Z,{title:(0,c.t)("admin.changeOwner"),onClick:e.onUpdateOwner},void 0)}),void 0)]},void 0),(0,a.jsxs)("td",{children:[s.tid_skin>0&&(0,a.jsx)("a",Object.assign({href:`${blessing.base_url}/skinlib/show/${s.tid_skin}`,target:"_blank",className:"mr-1"},{children:(0,a.jsx)("img",{src:`${blessing.base_url}/preview/${s.tid_skin}`,alt:`${s.name} - ${(0,c.t)("general.skin")}`,width:"64"},void 0)}),void 0),s.tid_cape>0&&(0,a.jsx)("a",Object.assign({href:`${blessing.base_url}/skinlib/show/${s.tid_cape}`,target:"_blank"},{children:(0,a.jsx)("img",{src:`${blessing.base_url}/preview/${s.tid_cape}`,alt:`${s.name} - ${(0,c.t)("general.cape")}`,width:"64"},void 0)}),void 0)]},void 0),(0,a.jsx)("td",{children:s.last_modified},void 0),(0,a.jsxs)("td",Object.assign({className:"d-flex flex-wrap"},{children:[(0,a.jsx)("button",Object.assign({className:"btn btn-default mr-2",onClick:e.onUpdateTexture},{children:(0,c.t)("admin.changeTexture")}),void 0),(0,a.jsx)("button",Object.assign({className:"btn btn-danger",onClick:e.onDelete},{children:(0,c.t)("admin.deletePlayer")}),void 0)]}),void 0)]},void 0)};const k=(0,h.Z)(u.ZP)`
  line-height: 2;
`;var _=()=>(0,a.jsx)("tr",{children:(0,a.jsx)("td",Object.assign({colSpan:6},{children:(0,a.jsx)(k,{},void 0)}),void 0)},void 0),$=i(7109),C=i(7073),Z=e=>{const[s,i]=(0,d.useState)("skin"),[n,t]=(0,d.useState)(""),r=e=>{i(e.target.value)};return(0,a.jsxs)(C.Z,Object.assign({show:e.open,center:!0,title:(0,c.t)("admin.changeTexture"),onConfirm:()=>{e.onSubmit(s,Number.parseInt(n)),i("skin"),t("")},onClose:()=>{i("skin"),t(""),e.onClose()}},{children:[(0,a.jsxs)("div",Object.assign({className:"form-group"},{children:[(0,a.jsx)("label",{children:(0,c.t)("admin.textureType")},void 0),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",Object.assign({className:"mr-5"},{children:[(0,a.jsx)("input",{className:"mr-1",type:"radio",value:"skin",checked:"skin"===s,onChange:r},void 0),(0,c.t)("general.skin")]}),void 0),(0,a.jsxs)("label",{children:[(0,a.jsx)("input",{className:"mr-1",type:"radio",value:"cape",checked:s===$.N.Cape,onChange:r},void 0),(0,c.t)("general.cape")]},void 0)]},void 0)]}),void 0),(0,a.jsxs)("div",Object.assign({className:"form-group"},{children:[(0,a.jsx)("label",Object.assign({htmlFor:"update-texture-tid"},{children:"TID"}),void 0),(0,a.jsx)("input",{type:"number",id:"update-texture-tid",className:"form-control",placeholder:(0,c.t)("admin.pidNotice"),value:n,onChange:e=>{t(e.target.value)}},void 0)]}),void 0)]}),void 0)},S=(0,n.w)((()=>{const[e,s]=(0,t.x)([]),[i,n]=(0,d.useState)(1),[h,x]=(0,d.useState)(1),[g,p]=(0,d.useState)(!1),u=(0,r.Z)(),[N,f]=(0,d.useState)(!1),[w,k]=(0,d.useState)(""),[$,C]=(0,d.useState)(-1);(0,d.useLayoutEffect)((()=>{u&&f(!0)}),[u]);const S=async()=>{p(!0);const{data:e,last_page:a}=await l.U2(v.Z.admin.players.list(),{q:w,page:i});x(a),s((()=>e)),p(!1)};(0,d.useEffect)((()=>{S()}),[i]);const P=e=>{f("table"===e.target.value)},U=async(e,i)=>{let a;try{const{value:s}=await(0,o.K)({mode:"prompt",text:(0,c.t)("admin.changePlayerNameNotice"),input:e.name,validator:e=>{if(!e)return(0,c.t)("admin.emptyPlayerName")}});a=s}catch(e){return}const{code:d,message:n}=await l.gz(v.Z.admin.players.name(e.pid),{player_name:a});0===d?(o.A.success(n),s((e=>{e[i].name=a}))):o.A.error(n)},T=async(e,i)=>{let a;try{const{value:s}=await(0,o.K)({mode:"prompt",text:(0,c.t)("admin.changePlayerOwner"),input:e.uid.toString(),inputMode:"numeric"});a=Number.parseInt(s)}catch(e){return}const{code:d,message:n}=await l.gz(v.Z.admin.players.owner(e.pid),{uid:a});0===d?(o.A.success(n),s((e=>{e[i].uid=a}))):o.A.error(n)},A=async e=>{try{await(0,o.K)({text:(0,c.t)("admin.deletePlayerNotice"),okButtonType:"danger"})}catch(e){return}const{code:i,message:a}=await l.IV(v.Z.admin.players.delete(e.pid));0===i?(s((s=>s.filter((({pid:s})=>s!==e.pid)))),o.A.success(a)):o.A.error(a)};return(0,a.jsxs)("div",Object.assign({className:"card"},{children:[(0,a.jsxs)(m.Z,Object.assign({className:"card-header"},{children:[(0,a.jsxs)("form",Object.assign({className:"input-group",onSubmit:e=>{e.preventDefault(),S()}},{children:[(0,a.jsx)("input",{type:"text",inputMode:"search",className:"form-control",title:(0,c.t)("vendor.datatable.search"),value:w,onChange:e=>{k(e.target.value)}},void 0),(0,a.jsx)("div",Object.assign({className:"input-group-append"},{children:(0,a.jsx)("button",Object.assign({className:"btn btn-primary",type:"submit"},{children:(0,c.t)("vendor.datatable.search")}),void 0)}),void 0)]}),void 0),(0,a.jsxs)("div",Object.assign({className:"btn-group btn-group-toggle"},{children:[(0,a.jsxs)("label",Object.assign({className:"btn btn-secondary "+(N?"active":""),title:"Table Mode"},{children:[(0,a.jsx)("input",{type:"radio",value:"table",checked:N,onChange:P},void 0),(0,a.jsx)("i",{className:"fas fa-list"},void 0)]}),void 0),(0,a.jsxs)("label",Object.assign({className:"btn btn-secondary "+(N?"":"active"),title:"Card Mode"},{children:[(0,a.jsx)("input",{type:"radio",value:"card",checked:!N,onChange:P},void 0),(0,a.jsx)("i",{className:"fas fa-grip-vertical"},void 0)]}),void 0)]}),void 0)]}),void 0),0!==e.length||g?N?(0,a.jsx)("div",Object.assign({className:"card-body table-responsive p-0"},{children:(0,a.jsxs)("table",Object.assign({className:"table "+(g?"":"table-striped")},{children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{children:"PID"},void 0),(0,a.jsx)("th",{children:(0,c.t)("general.player.player-name")},void 0),(0,a.jsx)("th",{children:(0,c.t)("general.player.owner")},void 0),(0,a.jsx)("th",{children:(0,c.t)("general.player.previews")},void 0),(0,a.jsx)("th",{children:(0,c.t)("general.player.last-modified")},void 0),(0,a.jsx)("th",{children:(0,c.t)("admin.operationsTitle")},void 0)]},void 0)},void 0),(0,a.jsx)("tbody",{children:g?new Array(10).fill(null).map(((e,s)=>(0,a.jsx)(_,{},s))):e.map(((e,s)=>(0,a.jsx)(O,{player:e,onUpdateName:()=>U(e,s),onUpdateOwner:()=>T(e,s),onUpdateTexture:()=>C(s),onDelete:()=>A(e)},e.pid)))},void 0)]}),void 0)}),void 0):(0,a.jsx)("div",Object.assign({className:"card-body d-flex flex-wrap"},{children:g?new Array(10).fill(null).map(((e,s)=>(0,a.jsx)(y,{},s))):e.map(((e,s)=>(0,a.jsx)(b,{player:e,onUpdateName:()=>U(e,s),onUpdateOwner:()=>T(e,s),onUpdateTexture:()=>C(s),onDelete:()=>A(e)},e.pid)))}),void 0):(0,a.jsx)("div",Object.assign({className:"card-body text-center"},{children:(0,c.t)("general.noResult")}),void 0),(0,a.jsx)("div",Object.assign({className:"card-footer"},{children:(0,a.jsx)("div",Object.assign({className:"float-right"},{children:(0,a.jsx)(j.Z,{page:i,totalPages:h,onChange:n},void 0)}),void 0)}),void 0),(0,a.jsx)(Z,{open:$>-1,onSubmit:async(i,a)=>{const{code:d,message:n}=await l.gz(v.Z.admin.players.texture(e[$].pid),{type:i,tid:a});0===d?(o.A.success(n),s((e=>{const s=`tid_${i}`;e[$][s]=a}))):o.A.error(n)},onClose:()=>C(-1)},void 0)]}),void 0)}))}}]);